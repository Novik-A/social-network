{"version":3,"sources":["components/common/FormsControls/FormsControls.module.css","components/common/FormsControls/FormsControls.tsx","utils/validators.ts","hoc/withAuthRedirect.tsx","assets/images/avatar.png","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["module","exports","Textarea","input","meta","props","hasError","touched","error","className","styles","formControl","Input","required","value","maxLengthCreator","maxLength","length","mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","restProps","to","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","unsupportedIterableToArray","TypeError","ProfileStatusWithHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","autoFocus","onChange","e","currentTarget","onBlur","updateStatus","ProfileInfo","isOwner","profile","savePhoto","Preloader","s","description","mainPhoto","src","photos","large","userPhoto","alt","type","target","files","Post","post","message","likes","MyPosts","React","memo","postsElements","posts","map","p","id","myPosts","AddPostTextFormRedux","onSubmit","formData","addPost","newPostText","maxLength20","reduxForm","form","handleSubmit","Field","component","name","placeholder","validate","MyPostsContainer","profilePage","dispatch","addPostAC","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","toString","history","getUserProfile","getStatus","refreshProfile","prevProps","prevState","snapshot","compose","withRouter"],"mappings":"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","file":"static/js/4.0bddf5ae.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2Nv7S\",\"error\":\"FormsControls_error__2VzmY\",\"formSummaryError\":\"FormsControls_formSummaryError__aOmkg\"};","import React from \"react\";\r\nimport styles from \"./FormsControls.module.css\";\r\n\r\ntype InputType = {\r\n    name: string\r\n    onBlur: ()=>void\r\n    onChange: ()=>void\r\n    onDragStart: ()=>void\r\n    onDrop: ()=>void\r\n    onFocus: ()=>void\r\n    value: string\r\n}\r\ntype MetaType = {\r\n    active: boolean\r\n    asyncValidating: boolean\r\n    autofilled: boolean\r\n    dirty: boolean\r\n    dispatch: ()=>void\r\n    error: string\r\n    form: string\r\n    initial: undefined\r\n    invalid: boolean\r\n    pristine: boolean\r\n    submitFailed: boolean\r\n    submitting: boolean\r\n    touched: boolean\r\n    valid: boolean\r\n    visited: boolean\r\n    warning: undefined\r\n}\r\ntype PropsType = {\r\n    input: InputType\r\n    meta: MetaType\r\n    placeholder: string\r\n}\r\nexport const Textarea = ({input, meta,...props}: PropsType) => {\r\n    const hasError = meta.touched && meta.error\r\n    return <>\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <textarea {...input} {...props} />\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport const Input = ({input, meta,...props}: PropsType) => {\r\n    const hasError = meta.touched && meta.error\r\n    return <>\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <input {...input} {...props} />\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    </>\r\n}\r\n","export const required = (value: string) => {\r\n    if (value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number) => (value: string) => {\r\n    if (value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n    return undefined\r\n}","import React, {ComponentType} from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\nimport {connect} from \"react-redux\";\r\n\r\ntype MapStatePropsType =\r\n    {\r\n        isAuth: boolean\r\n    }\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        isAuth: state.auth.isAuth\r\n    }\r\n}\r\n\r\nexport function withAuthRedirect<T>(Component: ComponentType<T>) {\r\n    const RedirectComponent = (props: MapStatePropsType) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!isAuth) return <Redirect to={'/login'} />\r\n        return <Component {...restProps as T} />\r\n    }\r\n    let ConnectedRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n    return ConnectedRedirectComponent\r\n}","export default __webpack_public_path__ + \"static/media/avatar.68cdc451.png\";","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg\":\"ProfileInfo_bg__3-drJ\",\"description\":\"ProfileInfo_description__3fgMY\",\"mainPhoto\":\"ProfileInfo_mainPhoto__3M7De\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myPosts\":\"MyPosts_myPosts__3Mbj9\",\"posts\":\"MyPosts_posts__3LCja\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__1-VPp\"};","import React, {ChangeEvent, useEffect, useState} from \"react\";\r\n\r\ntype ProfileStatusPropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n}\r\n\r\nexport const ProfileStatusWithHooks: React.FC<ProfileStatusPropsType> = (props) => {\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        props.updateStatus(status)\r\n    }\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n    return <>\r\n        <div>\r\n            {!editMode &&\r\n            <div>\r\n                <span onDoubleClick={activateEditMode}>{props.status || '==='}</span>\r\n            </div>\r\n            }\r\n            {editMode &&\r\n            <div>\r\n                <input autoFocus={true}\r\n                       onChange={onStatusChange}\r\n                       onBlur={deactivateEditMode}\r\n                       value={status}/>\r\n            </div>\r\n            }\r\n        </div>\r\n    </>\r\n\r\n}\r\n    ","import React, { ChangeEvent } from \"react\";\r\nimport s from './ProfileInfo.module.css'\r\nimport {ProfilePropsType} from \"../Profile\";\r\nimport {Preloader} from \"../../common/Preloader/Preloader\";\r\nimport userPhoto from \"../../../assets/images/avatar.png\";\r\nimport {ProfileStatusWithHooks} from \"./ProfileStatusWithHooks\";\r\n\r\n\r\nexport const ProfileInfo: React.FC<ProfilePropsType> = ({isOwner,profile, status, updateStatus, savePhoto}) => {\r\n    if (!profile) {\r\n        return <Preloader />\r\n    }\r\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        // @ts-ignore\r\n        if (e.target.files.length) {\r\n            // @ts-ignore\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={s.description}>\r\n                <img className={s.mainPhoto} src={profile.photos.large || userPhoto} alt={'Avatar'}/>\r\n                {isOwner && <input type={'file'} onChange={onMainPhotoSelected}/>}\r\n                <ProfileStatusWithHooks status={status} updateStatus={updateStatus}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport s from './Post.module.css'\r\nimport {PostType} from \"../../../../App\";\r\n\r\nexport const Post: React.FC<PostType> = props => {\r\n    return (\r\n        <div className={s.post}>\r\n            <img src={\"https://image.freepik.com/free-vector/samurai-esports-logo-for-your-team_116205-81.jpg\"} alt=\"\"/>\r\n            {props.message}\r\n            <div>{`likes ${props.likes}`}</div>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport s from './MyPosts.module.css'\r\nimport {Post} from \"./Post/Post\";\r\nimport {PostType} from \"../../../App\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, required} from \"../../../utils/validators\";\r\nimport { Textarea } from \"../../common/FormsControls/FormsControls\";\r\n\r\ntype MyPostsPropsType = {\r\n    posts: Array<PostType>\r\n    addPost: (newPostText: string) => void\r\n    }\r\nexport const MyPosts: React.FC<MyPostsPropsType> = React.memo(props => {\r\n    const postsElements = props.posts.map(p => <Post id={p.id} message={p.message} likes={p.likes}/>)\r\n\r\n    const addPost = (formData: FormDataType) => {\r\n            props.addPost(formData.newPostText)\r\n    }\r\n\r\n    return (\r\n        <div className={s.myPosts}>\r\n            <h3>My posts</h3>\r\n            <AddPostTextFormRedux onSubmit={addPost}/>\r\n            <div className={s.posts}>\r\n                {postsElements}\r\n            </div>\r\n        </div>\r\n)\r\n})\r\n\r\ntype FormDataType = {\r\n    newPostText: string\r\n}\r\n\r\nconst maxLength20 = maxLengthCreator(20)\r\n\r\nconst AddPostTextForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field component={Textarea}\r\n                       name='newPostText'\r\n                       placeholder='Post message'\r\n                       validate={[required, maxLength20]}/>\r\n            </div>\r\n            <div>\r\n                <button>Add post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddPostTextFormRedux = reduxForm<FormDataType>({form: 'ProfileAddNewPostForm'})(AddPostTextForm)","import React from \"react\";\r\nimport {\r\n    addPostAC,\r\n    PostType\r\n} from \"../../../redux/profile-reducer\";\r\nimport {MyPosts} from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport {AppStateType} from \"../../../redux/redux-store\";\r\n\r\n\r\ntype MapStatePropsType = {\r\n    posts: PostType[]\r\n}\r\ntype MapDispatchPropsType = {\r\n    addPost: (newPostText: string) => void\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        posts: state.profilePage.posts\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch: Dispatch): MapDispatchPropsType => {\r\n    return {\r\n        addPost: (newPostText: string) => {\r\n            dispatch(addPostAC(newPostText))\r\n        }\r\n    }\r\n}\r\n\r\nexport const MyPostsContainer = connect (mapStateToProps, mapDispatchToProps) (MyPosts)","import React from \"react\";\r\nimport {ProfileInfo} from \"./ProfileInfo/ProfileInfo\";\r\nimport {MyPostsContainer} from \"./MyPosts/MyPostsContainer\";\r\nimport {ProfileType} from \"../../api/api\";\r\n\r\nexport type ProfilePropsType = {\r\n    isOwner: boolean\r\n    profile: ProfileType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    savePhoto: (file: string) => void\r\n}\r\n\r\nexport const Profile: React.FC<ProfilePropsType> = ({isOwner,profile, status, updateStatus, savePhoto}) => {\r\n    return (\r\n        <div>\r\n            <ProfileInfo isOwner={isOwner}\r\n                         profile={profile}\r\n                         status={status}\r\n                         updateStatus={updateStatus}\r\n                         savePhoto={savePhoto}/>\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport {Profile} from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {getStatus, getUserProfile, savePhoto, updateStatus} from \"../../redux/profile-reducer\";\r\nimport {RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\nimport {ProfileType} from \"../../api/api\";\r\n\r\nclass ProfileContainer extends React.Component<PropsType> {\r\n    refreshProfile () {\r\n        let userId = this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId.toString()\r\n            if (!userId) {\r\n                this.props.history.push('/login')\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId)\r\n        this.props.getStatus(userId)\r\n    }\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n    componentDidUpdate(prevProps: Readonly<PropsType>, prevState: Readonly<{}>, snapshot?: any) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Profile isOwner={!this.props.match.params.userId}\r\n                     profile={this.props.profile}\r\n                     status={this.props.status}\r\n                     updateStatus={this.props.updateStatus}\r\n                     savePhoto={this.props.savePhoto}/>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        profile: state.profilePage.profile,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.id,\r\n        isAuth: state.auth.isAuth\r\n\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps, {getUserProfile, getStatus, updateStatus, savePhoto}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer)\r\n\r\n\r\n// types\r\ntype MapStatePropsType =\r\n    {\r\n        profile: ProfileType\r\n        status: string\r\n        authorizedUserId: number\r\n        isAuth: boolean\r\n    }\r\ntype MapDispatchPropsType =\r\n    {\r\n        getUserProfile: (userId: string) => void\r\n        getStatus: (userId: string) => void\r\n        updateStatus: (status: string) => void\r\n        savePhoto: (file: string) => void\r\n    }\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\ntype ProfileContainerPropsType = MapStatePropsType & MapDispatchPropsType\r\ntype PropsType = RouteComponentProps<PathParamsType> & ProfileContainerPropsType"],"sourceRoot":""}